.. _compare:

Comparison with Django
=====================================

If you have read through the Django Tutorial, you've seen examples for templating in Django. While the rest of Django, such as models, settings, migrations, etc., is the same with or without DMP, the way you do templates will obviously change with DMP. The following examples should help you understand the different between two template systems.

    Note that, for the most part, the right column uses standard Python syntax.  That's why Mako rocks.

+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| Django                                                                   | DMP (Mako)                                                            |
+==========================================================================+=======================================================================+
| **Output the value of the question variable:**                                                                                                   |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {{ question }}                                                       |     ${ question }                                                     |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Call a method on the User object:**                                                                                                            |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {{ user.get_full_name }}                                             |     ${ user.get_full_name() }                                         |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Call a method with parameters on the User object:**                                                                                            |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {# Requires a custom tag #}                                          |     ${ user.has_perm('app.get_main_view') }                           |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Iterate through a relationship:**                                                                                                              |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     <ul>                                                                 |     <ul>                                                              |
|         {% for choice in question.choice_set.all %}                      |         %for choice in question.choice_set.all():                     |
|             <li>{{ choice.choice_text }}</li>                            |             <li>${ choice.choice_text }</li>                          |
|         {% endfor %}                                                     |         %endfor                                                       |
|     </ul>                                                                |     </ul>                                                             |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Set a variable:**                                                                                                                              |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {% with name="Sam" %}                                                |     <% name = "Sam" %>                                                |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Format a date:**                                                                                                                               |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {{ value|date:"D d M Y" }}                                           |     ${ value.strftime('%D %d %M %Y') }                                |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Join a list:**                                                                                                                                 |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {{ mylist | join:', ' }}                                             |     ${ ', '.join(mylist) }                                            |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Use the /static prefix:**                                                                                                                      |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {% load static %}                                                    |     <img src="${ STATIC_ROOT }images/hi.jpg"/>                        |
|     <img src="{% get_static_prefix %}images/hi.jpg"/>                    |                                                                       |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Call a Python method:**                                                                                                                        |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {% Requires a custom tag, unless a    %}                             |     ## Any Python method can be called:                               |
|     {% built-in tag provides the behavior %}                             |     <%! import random %>                                              |
|                                                                          |     ${ random.randint(1, 10) }                                        |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Print a Django form:**                                                                                                                         |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     <form action="/your-name/" method="post">                            |     <form action="/your-name/" method="post">                         |
|         {% csrf_token %}                                                 |         ${ csrf_input }                                               |
|         {{ form }}                                                       |         ${ form }                                                     |
|         <input type="submit" value="Submit" />                           |         <input type="submit" value="Submit" />                        |
|     </form>                                                              |     </form>                                                           |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Output a default if empty:**                                                                                                                   |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {{ value | default:"nothing" }}                                      |     ## Use a boolean:                                                 |
|                                                                          |     ${ value or "nothing" }                                           |
|                                                                          |                                                                       |
|                                                                          |     ## or use a Python if statement:                                  |
|                                                                          |     ${ value if value is not None else "nothing" }                    |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
|     Run arbitrary Python:                                                                                                                        |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {# Requires a custom tag  #}                                         |     ## Keep it simple, Tex!                                           |
|                                                                          |     <%                                                                |
|                                                                          |         i = 1                                                         |
|                                                                          |         while i < 10:                                                 |
|                                                                          |             context.write('<p>Testing {0}</p>'.format(i))             |
|                                                                          |         i += 1                                                        |
|                                                                          |     %>                                                                |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Inherit another template:**                                                                                                                    |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {% extends "base.html" %}                                            |     <%inherit file="base.htm" />                                      |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Override a block:**                                                                                                                            |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {% block title %}                                                    |     <%block name="title">                                             |
|         My amazing blog                                                  |         My amazing blog                                               |
|     {% endblock %}                                                       |     </%block>                                                         |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Link to a CSS file:**                                                                                                                          |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {# Place in template #}                                              |     ## Automatically done by DMP (by name convention)                 |
|     <link rel="stylesheet" type="text/css" href="...">                   |                                                                       |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| **Perform per-request logic in JS files:**                                                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
| .. code-block:: django                                                   | .. code-block:: html+mako                                             |
|                                                                          |                                                                       |
|     {# Difficult, young padwan...very difficult #}                       |     ## Wrap context keys with ``jscontext()``, and DMP will           |
|                                                                          |     ## make the variable available in your JS file.                   |
|                                                                          |                                                                       |
+--------------------------------------------------------------------------+-----------------------------------------------------------------------+
